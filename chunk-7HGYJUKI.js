import{b as D,c as O,h as G,j as z,k as H}from"./chunk-OOVJ2RK5.js";import"./chunk-UT6QFC45.js";import{b as y,d as w,f as E,g as x,j as M,l as N,o as F,r as I,t as T}from"./chunk-3UMKY4XX.js";import{Aa as f,Fa as p,Ka as r,La as e,Ma as _,N as d,Ob as g,Sa as c,Ta as C,Tb as h,Tc as b,Zb as v,db as i,eb as S,ia as l,ra as P,wa as u}from"./chunk-OCIATHT5.js";function j(t,n){if(t&1&&(r(0,"div",1),i(1),e()),t&2){let a=C();l(),S(a.error)}}function q(t,n){t&1&&(r(0,"mat-error"),i(1,"Has\u0142o jest wymagane"),e())}function B(t,n){t&1&&(r(0,"mat-error"),i(1,"Has\u0142a nie s\u0105 takie same"),e())}function R(t,n){t&1&&(r(0,"mat-error"),i(1,"Powt\xF3rz has\u0142o"),e())}var V=class t{error;fb=d(I);form=this.fb.group({newPassword:["",w.required],confirmPassword:["",w.required]});http=d(h);router=d(v);ngOnInit(){}onSubmit(){if(this.form.invalid)return;let{newPassword:n}=this.form.value;this.comparePasswords(),this.http.post("/api/set-password",{password:n},{withCredentials:!0}).subscribe({next:()=>this.router.navigate(["/groups"]),error:()=>this.error="Nie uda\u0142o si\u0119 ustawi\u0107 has\u0142a."})}comparePasswords(){let{newPassword:n,confirmPassword:a}=this.form.value;if(n!==a){this.form.controls.confirmPassword.setErrors({incorrect:!0});return}else this.form.controls.confirmPassword.setErrors(null)}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=P({type:t,selectors:[["set-password"]],decls:17,vars:5,consts:[[1,"password-form",3,"ngSubmit","formGroup"],[1,"error"],["appearance","outline"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword",3,"blur"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,o){if(a&1&&(r(0,"form",0),c("ngSubmit",function(){return o.onSubmit()}),r(1,"h2"),i(2,"Ustaw nowe has\u0142o"),e(),u(3,j,2,1,"div",1),r(4,"mat-form-field",2)(5,"mat-label"),i(6,"Nowe has\u0142o:"),e(),_(7,"input",3),u(8,q,2,0,"mat-error"),e(),r(9,"mat-form-field",2)(10,"mat-label"),i(11,"Powt\xF3rz has\u0142o:"),e(),r(12,"input",4),c("blur",function(){return o.comparePasswords()}),e(),u(13,B,2,0,"mat-error")(14,R,2,0,"mat-error"),e(),r(15,"button",5),i(16,"Zapisz has\u0142o"),e()()),a&2){let s,m;f("formGroup",o.form),l(3),p(o.error?3:-1),l(5),p((s=o.form.get("newPassword"))!=null&&s.invalid&&((s=o.form.get("newPassword"))!=null&&s.dirty||(s=o.form.get("newPassword"))!=null&&s.touched)?8:-1),l(5),p(!((m=o.form.get("confirmPassword"))==null||m.errors==null)&&m.errors.incorrect?13:(m=o.form.get("confirmPassword"))!=null&&m.dirty||(m=o.form.get("confirmPassword"))!=null&&m.touched?14:-1),l(2),f("disabled",o.form.invalid)}},dependencies:[g,T,M,y,E,x,N,F,H,z,G,D,O,b],styles:[".password-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;display:flex;flex-direction:column;gap:12px}.error[_ngcontent-%COMP%]{color:red}"]})};export{V as SetPasswordComponent};
