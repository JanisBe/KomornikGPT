import{a as X,b as Y}from"./chunk-ABSVWYWB.js";import"./chunk-3RTQ72Y6.js";import{t as j}from"./chunk-3SQQUEWW.js";import{b as G,c as D,h as q,i as H,j as W,k as A}from"./chunk-CBJ5GURM.js";import"./chunk-FIU6Q7JL.js";import{a as Z,b as J,c as K,e as Q,f as U}from"./chunk-T6O22EEE.js";import{a as $,b as tt}from"./chunk-U2HAPIUY.js";import"./chunk-C347TPR5.js";import{b as B,d as f,f as L,g as I,j as z,l as N,o as O,q as T,r as R,t as V}from"./chunk-CLIUXEPF.js";import{Aa as d,Fa as p,Ka as i,La as r,Ma as u,Nb as y,Qa as M,S as w,Sa as F,Sb as h,Sc as k,T as _,Ta as c,Uc as E,Yb as v,Zb as b,ac as S,db as n,eb as P,ia as s,ma as m,mb as g,ra as x,wa as l}from"./chunk-LRQC4R4T.js";var ot=()=>["/login"];function it(e,a){e&1&&u(0,"mat-progress-bar",2)}function rt(e,a){e&1&&(i(0,"mat-error"),n(1,"Email jest wymagany"),r())}function nt(e,a){e&1&&(i(0,"mat-error"),n(1,"Email jest niepoprawny"),r())}function at(e,a){if(e&1&&(i(0,"div",8),n(1),r()),e&2){let t=c(2);s(),P(t.errorMessage)}}function st(e,a){if(e&1){let t=M();i(0,"p",4),n(1,"Podaj adres email, na kt\xF3ry zostanie wys\u0142any link do resetowania has\u0142a."),r(),i(2,"form",5),F("ngSubmit",function(){w(t);let C=c();return _(C.onSubmit())}),i(3,"mat-form-field",6)(4,"mat-label"),n(5,"Email"),r(),u(6,"input",7),l(7,rt,2,0,"mat-error")(8,nt,2,0,"mat-error"),r(),l(9,at,2,1,"div",8),i(10,"div",9)(11,"button",10),n(12," Wy\u015Blij link resetuj\u0105cy "),r(),i(13,"button",11),n(14," Powr\xF3t do logowania "),r()()()}if(e&2){let t,o=c();s(2),d("formGroup",o.forgotPasswordForm),s(5),p(!((t=o.forgotPasswordForm.get("email"))==null||t.errors==null)&&t.errors.required&&((t=o.forgotPasswordForm.get("email"))!=null&&t.dirty||(t=o.forgotPasswordForm.get("email"))!=null&&t.touched)?7:!((t=o.forgotPasswordForm.get("email"))==null||t.errors==null)&&t.errors.email&&((t=o.forgotPasswordForm.get("email"))!=null&&t.dirty||(t=o.forgotPasswordForm.get("email"))!=null&&t.touched)?8:-1),s(2),p(o.errorMessage?9:-1),s(2),d("disabled",o.forgotPasswordForm.invalid||o.isLoading),s(2),d("routerLink",g(5,ot))}}function mt(e,a){e&1&&(i(0,"div",3)(1,"mat-icon",12),n(2,"check_circle"),r(),i(3,"p"),n(4,"Link do resetowania has\u0142a zosta\u0142 wys\u0142any na podany adres email."),r(),i(5,"button",11),n(6," Powr\xF3t do logowania "),r()()),e&2&&(s(5),d("routerLink",g(1,ot)))}var et=class e{constructor(a,t,o,C){this.fb=a;this.http=t;this.router=o;this.snackBar=C;this.forgotPasswordForm=this.fb.group({email:["",[f.required,f.email]]})}forgotPasswordForm;isLoading=!1;errorMessage="";emailSent=!1;onSubmit(){if(this.forgotPasswordForm.valid){let a=this.forgotPasswordForm.get("email")?.value;this.isLoading=!0,this.errorMessage="",this.http.post("/api/forgot-password",{email:a}).subscribe({next:()=>{this.isLoading=!1,this.emailSent=!0},error:t=>{this.isLoading=!1,console.error(t),t.status===404?this.errorMessage="Nie znaleziono u\u017Cytkownika z podanym adresem email":this.errorMessage="Wyst\u0105pi\u0142 b\u0142\u0105d podczas wysy\u0142ania linku resetuj\u0105cego. Spr\xF3buj ponownie.",this.snackBar.open(this.errorMessage,"Zamknij",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}}static \u0275fac=function(t){return new(t||e)(m(R),m(h),m(v),m(j))};static \u0275cmp=x({type:e,selectors:[["app-forgot-password"]],decls:9,vars:2,consts:[[1,"forgot-password-container"],[1,"forgot-password-card"],["mode","indeterminate"],[1,"success-message"],[1,"instruction"],[3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","type","email","formControlName","email","required",""],[1,"error-message"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"routerLink"],["color","primary"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n(4,"Przypomnij has\u0142o"),r()(),l(5,it,1,0,"mat-progress-bar",2),i(6,"mat-card-content"),l(7,st,15,6)(8,mt,7,2,"div",3),r()()()),t&2&&(s(5),p(o.isLoading?5:-1),s(2),p(o.emailSent?8:7))},dependencies:[y,V,z,B,L,I,T,N,O,S,b,A,W,q,G,D,H,E,k,U,Z,K,Q,J,Y,X,tt,$],styles:[".forgot-password-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5}.forgot-password-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:20px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:16px}.error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}.instruction[_ngcontent-%COMP%]{margin-bottom:24px;color:#0009}.success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:24px 0}.success-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}"]})};export{et as ForgotPasswordComponent};
