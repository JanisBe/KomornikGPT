import{a as ot,b as nt,c as rt,d as at,e as ct}from"./chunk-OVZVD566.js";import{A as Di,B as Ii,C as Ti,D as Ui,E as Fi,F as Gi,G as Pi,a as me,b as K,c as le,d as V,e as N,f as A,g as q,h as U,i as se,j as de,k as lt,l as st,m as dt,n as pt,o as ut,p as ht,q as Ft,r as ki,s as vi,t as Ci,u as bt,v as yi,w as Mi,x as Ei,y as Si,z as wi}from"./chunk-MU522GSY.js";import{a as Ne,e as mt,i as xi,n as Gt}from"./chunk-ZPEBW7X4.js";import"./chunk-3RTQ72Y6.js";import{t as Z,u as ce}from"./chunk-DCUX3RJ3.js";import{b as Ke,c as Xe,e as Ye,h as Qe,i as We,j as Je,k as et}from"./chunk-OOVJ2RK5.js";import"./chunk-UT6QFC45.js";import{a as Oi,b as Ni}from"./chunk-7U5CIWV7.js";import"./chunk-VE3YEBPC.js";import{a as si}from"./chunk-QM6DEZKA.js";import"./chunk-57JEQQKW.js";import{a as tt,b as it}from"./chunk-GCU5MVPG.js";import{a as ae,b as Pe}from"./chunk-GRNZQBTD.js";import{a as ui,b as hi,c as bi,d as fi,e as _i,f as gi}from"./chunk-Y6CI4VTS.js";import{a as z,b as B}from"./chunk-XCJIMQHN.js";import"./chunk-XOSZVAVX.js";import{a as di,b as Ae,c as pi,d as k,f as Re,g as ze,j as Be,l as Ve,m as qe,n as je,o as $e,q as Le,r as He,t as Ze}from"./chunk-3UMKY4XX.js";import{$a as It,Aa as s,C as ie,Ca as fe,Da as Ht,Db as ei,Fa as h,Ga as Ee,Ha as oe,I as zt,Ia as S,J as ve,Ja as w,Jb as ti,K as Ce,Ka as a,Kb as Te,L as yt,La as r,Lb as ii,M as Mt,Ma as b,Mb as Ue,Mc as mi,N as P,Na as Se,Nb as oi,Nc as li,Oa as we,Ob as G,Oc as R,Qa as I,R as Bt,Ra as Zt,Rc as Ut,S as _,Sa as d,Sb as Fe,T as g,Ta as x,Tb as Ge,Tc as O,U as Vt,Ua as Kt,Uc as Oe,V as qt,Va as Xt,Vc as D,Wa as ne,Y as jt,Z as ye,Za as wt,_ as Et,_a as Dt,_b as ni,a as J,aa as $t,b as ee,bc as ri,c as xe,cb as L,d as te,da as Lt,db as c,eb as T,fb as M,gb as re,ia as m,lb as De,lc as ai,ma as u,o as ke,ob as F,p as $,pb as Ie,qb as _e,r as Rt,ra as y,rb as Yt,sa as Me,sb as Tt,tb as Qt,vb as Wt,wa as f,wc as ci,xb as H,yb as Jt,za as St}from"./chunk-OCIATHT5.js";var ft=class n{constructor(t){this.data=t}static \u0275fac=function(e){return new(e||n)(u(K))};static \u0275cmp=y({type:n,selectors:[["app-delete-group-dialog"]],decls:10,vars:2,consts:[[1,"dialog-container"],["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","warn",3,"mat-dialog-close"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"h2",1),c(2,"Skasuj grup\u0119"),r(),a(3,"mat-dialog-content"),c(4),r(),a(5,"mat-dialog-actions",2)(6,"button",3),c(7,"Anuluj"),r(),a(8,"button",4),c(9,"Skasuj"),r()()()),e&2&&(m(4),M(' Czy na pewno chcesz skasowac\u0301 grupe\u0328 "',i.data.name,'"? '),m(4),s("mat-dialog-close",!0))},dependencies:[G,U,V,N,q,A,D,O],styles:[".dialog-container[_ngcontent-%COMP%]{padding:24px}mat-dialog-content[_ngcontent-%COMP%]{margin:20px 0;min-width:300px}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0;margin-bottom:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}"]})};var Ki=["input"],Xi=["label"],Yi=["*"],Qi=new yt("mat-checkbox-default-options",{providedIn:"root",factory:Ri});function Ri(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var E=function(n){return n[n.Init=0]="Init",n[n.Checked=1]="Checked",n[n.Unchecked=2]="Unchecked",n[n.Indeterminate=3]="Indeterminate",n}(E||{}),Wi={provide:di,useExisting:zt(()=>X),multi:!0},Pt=class{source;checked},Ai=Ri(),X=(()=>{class n{_elementRef=P($t);_changeDetectorRef=P(Wt);_ngZone=P(Et);_animationMode=P(Lt,{optional:!0});_options=P(Qi,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let i=new Pt;return i.source=this,i.checked=e,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new ye;indeterminateChange=new ye;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=E.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){P(ai).load(li);let e=P(new jt("tabindex"),{optional:!0});this._options=this._options||Ai,this.color=this._options.color||Ai.color,this.tabIndex=e==null?0:parseInt(e)||0,this.id=this._uniqueId=P(ci).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate}set indeterminate(e){let i=e!=this._indeterminate;this._indeterminate=e,i&&(this._indeterminate?this._transitionCheckState(E.Indeterminate):this._transitionCheckState(this.checked?E.Checked:E.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_indeterminate=!1;_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let i=this._currentCheckState,o=this._getAnimationTargetElement();if(!(i===e||!o)&&(this._currentAnimationClass&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);let l=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(l)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?E.Checked:E.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,i){if(this._animationMode==="NoopAnimations")return"";switch(e){case E.Init:if(i===E.Checked)return this._animationClasses.uncheckedToChecked;if(i==E.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case E.Unchecked:return i===E.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case E.Checked:return i===E.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case E.Indeterminate:return i===E.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=y({type:n,selectors:[["mat-checkbox"]],viewQuery:function(i,o){if(i&1&&(wt(Ki,5),wt(Xi,5)),i&2){let l;Dt(l=It())&&(o._inputElement=l.first),Dt(l=It())&&(o._labelElement=l.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(i,o){i&2&&(Zt("id",o.id),St("tabindex",null)("aria-label",null)("aria-labelledby",null),Ht(o.color?"mat-"+o.color:"mat-accent"),fe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mdc-checkbox--disabled",o.disabled)("mat-mdc-checkbox-disabled",o.disabled)("mat-mdc-checkbox-checked",o.checked)("mat-mdc-checkbox-disabled-interactive",o.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",H],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",H],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",H],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:Jt(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",H],checked:[2,"checked","checked",H],disabled:[2,"disabled","disabled",H],indeterminate:[2,"indeterminate","indeterminate",H]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[De([Wi,{provide:pi,useExisting:n,multi:!0}]),Bt],ngContentSelectors:Yi,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,o){if(i&1){let l=I();Kt(),a(0,"div",3),d("click",function(v){return _(l),g(o._preventBubblingFromLabel(v))}),a(1,"div",4,0)(3,"div",5),d("click",function(){return _(l),g(o._onTouchTargetClick())}),r(),a(4,"input",6,1),d("blur",function(){return _(l),g(o._onBlur())})("click",function(){return _(l),g(o._onInputClick())})("change",function(v){return _(l),g(o._onInteractionEvent(v))}),r(),b(6,"div",7),a(7,"div",8),Vt(),a(8,"svg",9),b(9,"path",10),r(),qt(),b(10,"div",11),r(),b(11,"div",12),r(),a(12,"label",13,2),Xt(14),r()()}if(i&2){let l=L(2);s("labelPosition",o.labelPosition),m(4),fe("mdc-checkbox--selected",o.checked),s("checked",o.checked)("indeterminate",o.indeterminate)("disabled",o.disabled&&!o.disabledInteractive)("id",o.inputId)("required",o.required)("tabIndex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex),St("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-checked",o.indeterminate?"mixed":null)("aria-controls",o.ariaControls)("aria-disabled",o.disabled&&o.disabledInteractive?!0:null)("aria-expanded",o.ariaExpanded)("aria-owns",o.ariaOwns)("name",o.name)("value",o.value),m(7),s("matRippleTrigger",l)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),m(),s("for",o.inputId)}},dependencies:[mi,xi],styles:[`.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();var _t=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Me({type:n});static \u0275inj=Ce({imports:[X,Ut,Ut]})}return n})();var he=class n{constructor(t,e){this.http=t;this.authService=e}apiUrl=`${ae.apiUrl}/users`;getUsers(){return this.http.get(this.apiUrl)}getUser(t){return this.http.get(`${this.apiUrl}/${t}`)}getCurrentUser(){return this.http.get(`${this.apiUrl}/me`)}createUser(t){return this.http.post(`${this.apiUrl}/create-without-password`,t)}updateUser(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteUser(t){return this.http.delete(`${this.apiUrl}/${t}`)}isAdmin(t){return t&&t.role==="ADMIN"}canModifyUser(t){return this.authService.getCurrentUser().pipe($(e=>e&&(this.isAdmin(e)||e.id===t.id)))}static \u0275fac=function(e){return new(e||n)(Mt(Ge),Mt(Pe))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var co=(n,t)=>t.id;function mo(n,t){n&1&&(a(0,"mat-error"),c(1,"Name is required"),r())}function lo(n,t){n&1&&(a(0,"mat-error"),c(1,"Name must be at least 3 characters long"),r())}function so(n,t){if(n&1&&(a(0,"mat-option",13),c(1),r()),n&2){let e=t.$implicit;s("value",e),m(),T(e)}}function po(n,t){n&1&&(a(0,"mat-error"),c(1,"Currency is required"),r())}function uo(n,t){n&1&&(a(0,"mat-error"),c(1,"Username is required"),r())}function ho(n,t){if(n&1&&(a(0,"mat-option",13),c(1),r()),n&2){let e=t.$implicit;s("value",e.name),m(),M(" ",e.name," ")}}function bo(n,t){n&1&&(a(0,"mat-error"),c(1,"Email is required"),r())}function fo(n,t){n&1&&(a(0,"mat-error"),c(1,"Please enter a valid email address"),r())}function _o(n,t){if(n&1){let e=I();a(0,"div",16)(1,"div",30)(2,"mat-form-field",11)(3,"mat-label"),c(4,"Username"),r(),a(5,"input",31),d("input",function(){let o=_(e).$index,l=x();return g(l.onUserNameInput(o))}),r(),f(6,uo,2,0,"mat-error"),a(7,"mat-autocomplete",32,0),d("optionSelected",function(o){let l=_(e).$index,p=x();return g(p.onUserSelected(o,l))}),S(9,ho,2,2,"mat-option",13,co),F(11,"async"),r()(),a(12,"mat-form-field",11)(13,"mat-label"),c(14,"Email"),r(),b(15,"input",33),f(16,bo,2,0,"mat-error")(17,fo,2,0,"mat-error"),r()(),a(18,"button",34),d("click",function(){let o=_(e).$index,l=x();return g(l.removeMember(o))}),a(19,"mat-icon"),c(20,"close"),r()()()}if(n&2){let e,i,o,l=t.$implicit,p=t.$index,v=L(8),C=x();s("formGroupName",p),m(5),s("matAutocomplete",v),m(),h(!((e=l.get("userName"))==null||e.errors==null)&&e.errors.required?6:-1),m(3),w(Ie(11,6,C.filteredUsers[p])),m(7),h(!((i=l.get("email"))==null||i.errors==null)&&i.errors.required?16:-1),m(),h(!((o=l.get("email"))==null||o.errors==null)&&o.errors.email?17:-1),m(),s("disabled",C.members.length<=1)}}function go(n,t){n&1&&(a(0,"mat-error"),c(1,"Name is required"),r())}function xo(n,t){n&1&&(a(0,"mat-error"),c(1,"Surname is required"),r())}function ko(n,t){n&1&&(a(0,"mat-error"),c(1,"Username is required"),r())}function vo(n,t){n&1&&(a(0,"mat-error"),c(1,"Email is required"),r())}function Co(n,t){n&1&&(a(0,"mat-error"),c(1,"Please enter a valid email address"),r())}var gt=class n{constructor(t,e,i,o){this.fb=t;this.userService=e;this.dialogRef=i;this.data=o;this.groupForm=this.fb.group({name:["",[k.required,k.minLength(2)]],description:[""],members:this.fb.array([]),isPublic:[!1],defaultCurrency:["PLN",k.required]}),this.newUserForm=this.fb.group({name:["",k.required],surname:["",k.required],username:["",k.required],email:["",[k.required,k.email]]})}groupForm;newUserForm;availableUsers=[];pendingUsers=[];filteredUsers=[];tempIdCounter=0;currencies=Object.values(pt);get members(){return this.groupForm.get("members")}ngOnInit(){this.groupForm.patchValue({name:this.data.group.name,description:this.data.group.description,isPublic:this.data.group.isPublic??!1,defaultCurrency:this.data.group.defaultCurrency||"PLN"}),this.userService.getUsers().subscribe({next:t=>{this.availableUsers=t,this.data.group.members.forEach(e=>{this.addMember(e)})},error:t=>{console.error(t)}})}createMemberFormGroup(t){return this.fb.group({userName:[t?.name||"",k.required],email:[t?.email||"",[k.required,k.email]],userId:[t?.id||""]})}addMember(t){let e=this.createMemberFormGroup(t);this.members.push(e);let i=this.members.length-1;this.setupAutoComplete(i)}removeMember(t){this.members.length>1&&(this.members.removeAt(t),this.filteredUsers.splice(t,1))}onUserNameInput(t){let i=this.members.at(t).get("userName"),o=i?.value;i&&(this.filteredUsers[t]=i.valueChanges.pipe(ie(o),$(l=>this._filter(l||""))))}onUserSelected(t,e){let i=t.option.value,o=this.availableUsers.find(l=>l.name===i);o&&this.members.at(e).patchValue({userName:o.name,email:o.email,userId:o.id})}addNewUser(){if(this.newUserForm.valid){let t=this.newUserForm.value,e=`temp_${this.tempIdCounter++}`,i=ee(J({},t),{tempId:e});this.pendingUsers=[...this.pendingUsers,i];let o=this.createMemberFormGroup();o.patchValue({userName:t.name,email:t.email,userId:e}),this.members.push(o),this.setupAutoComplete(this.members.length-1),this.newUserForm.reset()}}onSubmit(){return te(this,null,function*(){if(this.groupForm.valid){let t=this.groupForm.value;try{let e=yield Promise.all(this.pendingUsers.map(o=>te(this,null,function*(){let C=o,{tempId:l}=C,p=xe(C,["tempId"]),v=yield ke(this.userService.createUser(p));return{tempId:l,createdUser:v}}))),i=t.members.map(o=>{if(o.userId){let l=e.find(p=>p.tempId===o.userId);return l?{userId:l.createdUser.id,userName:o.userName,email:o.email}:{userId:parseInt(o.userId.toString()),userName:o.userName,email:o.email}}return{userName:o.userName,email:o.email}});this.dialogRef.close({name:t.name,description:t.description,members:i,isPublic:t.isPublic,defaultCurrency:t.defaultCurrency})}catch(e){e instanceof Fe&&console.error(e)}}})}setupAutoComplete(t){let i=this.members.at(t).get("userName");i&&(this.filteredUsers[t]=i.valueChanges.pipe(ie(""),$(o=>this._filter(o||""))))}_filter(t){let e=t.toLowerCase();return this.availableUsers.filter(i=>i.name.toLowerCase().includes(e)||i.email.toLowerCase().includes(e))}static \u0275fac=function(e){return new(e||n)(u(He),u(he),u(me),u(K))};static \u0275cmp=y({type:n,selectors:[["app-edit-group-dialog"]],decls:81,vars:12,consts:[["auto","matAutocomplete"],[1,"dialog-container"],["mat-dialog-title",""],[3,"ngSubmit","formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","description","rows","3","placeholder","Enter group description"],[1,"form-row"],["formControlName","isPublic",1,"mb-2"],[1,"form-field","currency-field"],["appearance","outline"],["formControlName","defaultCurrency","required",""],[3,"value"],["matSuffix",""],["formArrayName","members",1,"members-container"],[1,"member-row",3,"formGroupName"],[1,"add-member-link"],["mat-button","","color","primary",3,"click"],[1,"mt-3"],[1,"mt-3",3,"formGroup"],["matInput","","formControlName","name","placeholder","Enter name","required",""],["matInput","","formControlName","surname","placeholder","Enter surname","required",""],["matInput","","formControlName","username","placeholder","Enter username","required",""],["matInput","","formControlName","email","placeholder","Enter email","type","email","required",""],[1,"form-actions"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"member-inputs"],["matInput","","formControlName","userName",3,"input","matAutocomplete"],[3,"optionSelected"],["matInput","","formControlName","email","type","email","required",""],["mat-icon-button","","color","warn","type","button",3,"click","disabled"]],template:function(e,i){if(e&1&&(a(0,"div",1)(1,"h2",2),c(2,"Edit Group"),r(),a(3,"form",3),d("ngSubmit",function(){return i.onSubmit()}),a(4,"mat-dialog-content")(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),c(8,"Group Name"),r(),b(9,"input",6),f(10,mo,2,0,"mat-error")(11,lo,2,0,"mat-error"),r()(),a(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),c(15,"Description"),r(),b(16,"textarea",7),r()(),a(17,"div",8)(18,"mat-checkbox",9),c(19,"Public group (visible to everyone)"),r(),a(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),c(23,"Currency"),r(),a(24,"mat-select",12),S(25,so,2,2,"mat-option",13,oe),r(),a(27,"mat-icon",14),c(28,"currency_exchange"),r(),f(29,po,2,0,"mat-error"),r()()(),a(30,"div",15)(31,"h3"),c(32,"Members"),r(),S(33,_o,21,8,"div",16,Ee),a(35,"div",17)(36,"a",18),d("click",function(){return i.addMember()}),a(37,"mat-icon"),c(38,"add"),r(),c(39," Add a person "),r()()(),b(40,"mat-divider"),a(41,"mat-expansion-panel",19)(42,"mat-expansion-panel-header")(43,"mat-panel-title"),c(44," Add New Member "),r(),a(45,"mat-panel-description"),c(46," Create a new user without password "),r()(),a(47,"form",20)(48,"div",4)(49,"mat-form-field",5)(50,"mat-label"),c(51,"Name"),r(),b(52,"input",21),f(53,go,2,0,"mat-error"),r()(),a(54,"div",4)(55,"mat-form-field",5)(56,"mat-label"),c(57,"Surname"),r(),b(58,"input",22),f(59,xo,2,0,"mat-error"),r()(),a(60,"div",4)(61,"mat-form-field",5)(62,"mat-label"),c(63,"Username"),r(),b(64,"input",23),f(65,ko,2,0,"mat-error"),r()(),a(66,"div",4)(67,"mat-form-field",5)(68,"mat-label"),c(69,"Email"),r(),b(70,"input",24),f(71,vo,2,0,"mat-error")(72,Co,2,0,"mat-error"),r()(),a(73,"div",25)(74,"button",26),d("click",function(){return i.addNewUser()}),c(75," Add to Group "),r()()()()(),a(76,"mat-dialog-actions",27)(77,"button",28),c(78,"Cancel"),r(),a(79,"button",29),c(80," Save Changes "),r()()()()),e&2){let o,l,p,v,C,Y,Q,W;m(3),s("formGroup",i.groupForm),m(7),h(!((o=i.groupForm.get("name"))==null||o.errors==null)&&o.errors.required?10:-1),m(),h(!((l=i.groupForm.get("name"))==null||l.errors==null)&&l.errors.minlength?11:-1),m(14),w(i.currencies),m(4),h(!((p=i.groupForm.get("currency"))==null||p.errors==null)&&p.errors.required?29:-1),m(4),w(i.members.controls),m(14),s("formGroup",i.newUserForm),m(6),h(!((v=i.newUserForm.get("name"))==null||v.errors==null)&&v.errors.required?53:-1),m(6),h(!((C=i.newUserForm.get("surname"))==null||C.errors==null)&&C.errors.required?59:-1),m(6),h(!((Y=i.newUserForm.get("username"))==null||Y.errors==null)&&Y.errors.required?65:-1),m(6),h(!((Q=i.newUserForm.get("email"))==null||Q.errors==null)&&Q.errors.required?71:-1),m(),h(!((W=i.newUserForm.get("email"))==null||W.errors==null)&&W.errors.email?72:-1),m(2),s("disabled",!i.newUserForm.valid),m(5),s("disabled",!i.groupForm.valid)}},dependencies:[G,Te,Ze,Be,Ae,Re,ze,Le,Ve,$e,qe,je,U,V,N,q,A,D,Oe,O,R,We,Qe,Ke,Xe,Ye,et,Je,ct,ot,nt,at,rt,it,tt,B,z,dt,lt,mt,st,_t,X,ht,ut],styles:[".dialog-container[_ngcontent-%COMP%]{padding:24px}.form-field[_ngcontent-%COMP%]{margin-bottom:16px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{min-width:400px}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0;margin-bottom:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.mt-3[_ngcontent-%COMP%]{margin-top:16px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.form-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:16px;margin-bottom:16px}.members-container[_ngcontent-%COMP%]{margin:24px 0}.member-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.member-inputs[_ngcontent-%COMP%]{display:flex;gap:16px;flex:1}.member-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.add-member-link[_ngcontent-%COMP%]{margin-top:8px}h3[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:500}"]})};var yo=(n,t)=>t.id;function Mo(n,t){n&1&&(a(0,"mat-error"),c(1,"Name is required"),r())}function Eo(n,t){n&1&&(a(0,"mat-error"),c(1,"Name must be at least 3 characters long"),r())}function So(n,t){if(n&1&&(a(0,"mat-option",13),c(1),r()),n&2){let e=t.$implicit;s("value",e),m(),T(e)}}function wo(n,t){n&1&&(a(0,"mat-error"),c(1,"Currency is required"),r())}function Do(n,t){n&1&&(a(0,"mat-error"),c(1,"Username is required"),r())}function Io(n,t){if(n&1&&(a(0,"mat-option",13),c(1),r()),n&2){let e=t.$implicit;s("value",e.name),m(),M(" ",e.name," ")}}function To(n,t){n&1&&(a(0,"mat-error"),c(1,"Email is required"),r())}function Uo(n,t){n&1&&(a(0,"mat-error"),c(1,"Please enter a valid email address"),r())}function Fo(n,t){if(n&1){let e=I();a(0,"div",16)(1,"div",30)(2,"mat-form-field",11)(3,"mat-label"),c(4,"Username"),r(),a(5,"input",31),d("input",function(){let o=_(e).$index,l=x();return g(l.onUserNameInput(o))}),r(),f(6,Do,2,0,"mat-error"),a(7,"mat-autocomplete",32,0),d("optionSelected",function(o){let l=_(e).$index,p=x();return g(p.onUserSelected(o,l))}),S(9,Io,2,2,"mat-option",13,yo),F(11,"async"),r()(),a(12,"mat-form-field",11)(13,"mat-label"),c(14,"Email"),r(),b(15,"input",33),f(16,To,2,0,"mat-error")(17,Uo,2,0,"mat-error"),r()(),a(18,"button",34),d("click",function(){let o=_(e).$index,l=x();return g(l.removeMember(o))}),a(19,"mat-icon"),c(20,"close"),r()()()}if(n&2){let e,i,o,l=t.$implicit,p=t.$index,v=L(8),C=x();s("formGroupName",p),m(5),s("matAutocomplete",v),m(),h(!((e=l.get("userName"))==null||e.errors==null)&&e.errors.required?6:-1),m(3),w(Ie(11,6,C.filteredUsers[p])),m(7),h(!((i=l.get("email"))==null||i.errors==null)&&i.errors.required?16:-1),m(),h(!((o=l.get("email"))==null||o.errors==null)&&o.errors.email?17:-1),m(),s("disabled",C.members.length<=1)}}function Go(n,t){n&1&&(a(0,"mat-error"),c(1,"Name is required"),r())}function Po(n,t){n&1&&(a(0,"mat-error"),c(1,"Surname is required"),r())}function Oo(n,t){n&1&&(a(0,"mat-error"),c(1,"Username is required"),r())}function No(n,t){n&1&&(a(0,"mat-error"),c(1,"Email is required"),r())}function Ao(n,t){n&1&&(a(0,"mat-error"),c(1,"Please enter a valid email address"),r())}var kt=class n{constructor(t,e,i){this.fb=t;this.userService=e;this.dialogRef=i;this.groupForm=this.fb.group({name:["",[k.required,k.minLength(2)]],description:[""],members:this.fb.array([]),isPublic:[!1],currency:["PLN",k.required]}),this.newUserForm=this.fb.group({name:["",k.required],surname:["",k.required],username:["",k.required],email:["",[k.required,k.email]]}),this.addMember()}groupForm;newUserForm;availableUsers=[];pendingUsers=[];filteredUsers=[];tempIdCounter=0;currencies=Object.values(pt);get members(){return this.groupForm.get("members")}ngOnInit(){this.userService.getUsers().subscribe({next:t=>{this.availableUsers=t},error:t=>{console.error(t)}})}createMemberFormGroup(){return this.fb.group({userName:["",k.required],email:["",[k.required,k.email]],userId:[""]})}addMember(){let t=this.createMemberFormGroup();this.members.push(t);let e=this.members.length-1;this.setupAutoComplete(e)}removeMember(t){this.members.length>1&&(this.members.removeAt(t),this.filteredUsers.splice(t,1))}onUserNameInput(t){let i=this.members.at(t).get("userName"),o=i?.value;i&&(this.filteredUsers[t]=i.valueChanges.pipe(ie(o),$(l=>this._filter(l||""))))}onUserSelected(t,e){let i=t.option.value,o=this.availableUsers.find(l=>l.name===i);o&&this.members.at(e).patchValue({userName:o.name,email:o.email,userId:o.id})}addNewUser(){if(this.newUserForm.valid){let t=this.newUserForm.value,e=`temp_${this.tempIdCounter++}`,i=ee(J({},t),{tempId:e});this.pendingUsers=[...this.pendingUsers,i];let o=this.createMemberFormGroup();o.patchValue({userName:t.name,email:t.email,userId:e}),this.members.push(o),this.setupAutoComplete(this.members.length-1),this.newUserForm.reset()}}onSubmit(){return te(this,null,function*(){if(this.groupForm.valid){let t=this.groupForm.value;try{let e=yield Promise.all(this.pendingUsers.map(o=>te(this,null,function*(){let C=o,{tempId:l}=C,p=xe(C,["tempId"]),v=yield ke(this.userService.createUser(p));return{tempId:l,createdUser:v}}))),i=t.members.map(o=>{if(o.userId){let l=e.find(p=>p.tempId===o.userId);return l?{userId:l.createdUser.id,userName:o.userName,email:o.email}:{userId:parseInt(o.userId.toString()),userName:o.userName,email:o.email}}return{userName:o.userName,email:o.email}});this.dialogRef.close({name:t.name,description:t.description,members:i,isPublic:t.isPublic,currency:t.currency})}catch(e){e instanceof Fe&&console.error(e)}}})}setupAutoComplete(t){let i=this.members.at(t).get("userName");i&&(this.filteredUsers[t]=i.valueChanges.pipe(ie(""),$(o=>this._filter(o||""))))}_filter(t){let e=t.toLowerCase();return this.availableUsers.filter(i=>i.name.toLowerCase().includes(e)||i.email.toLowerCase().includes(e))}static \u0275fac=function(e){return new(e||n)(u(He),u(he),u(me))};static \u0275cmp=y({type:n,selectors:[["app-create-group-dialog"]],decls:81,vars:12,consts:[["auto","matAutocomplete"],[1,"dialog-container"],["mat-dialog-title",""],[3,"ngSubmit","formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","description","rows","3","placeholder","Enter group description"],[1,"form-row"],["formControlName","isPublic",1,"mb-2"],[1,"form-field","currency-field"],["appearance","outline"],["formControlName","currency","required",""],[3,"value"],["matSuffix",""],["formArrayName","members",1,"members-container"],[1,"member-row",3,"formGroupName"],[1,"add-member-link"],["mat-button","","color","primary",3,"click"],[1,"mt-3"],[1,"mt-3",3,"formGroup"],["matInput","","formControlName","name","placeholder","Enter name","required",""],["matInput","","formControlName","surname","placeholder","Enter surname","required",""],["matInput","","formControlName","username","placeholder","Enter username","required",""],["matInput","","formControlName","email","placeholder","Enter email","type","email","required",""],[1,"form-actions"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"member-inputs"],["matInput","","formControlName","userName",3,"input","matAutocomplete"],[3,"optionSelected"],["matInput","","formControlName","email","type","email","required",""],["mat-icon-button","","color","warn","type","button",3,"click","disabled"]],template:function(e,i){if(e&1&&(a(0,"div",1)(1,"h2",2),c(2,"Create New Group"),r(),a(3,"form",3),d("ngSubmit",function(){return i.onSubmit()}),a(4,"mat-dialog-content")(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),c(8,"Group Name"),r(),b(9,"input",6),f(10,Mo,2,0,"mat-error")(11,Eo,2,0,"mat-error"),r()(),a(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),c(15,"Description"),r(),b(16,"textarea",7),r()(),a(17,"div",8)(18,"mat-checkbox",9),c(19,"Public group (visible to everyone)"),r(),a(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),c(23,"Currency"),r(),a(24,"mat-select",12),S(25,So,2,2,"mat-option",13,oe),r(),a(27,"mat-icon",14),c(28,"currency_exchange"),r(),f(29,wo,2,0,"mat-error"),r()()(),a(30,"div",15)(31,"h3"),c(32,"Members"),r(),S(33,Fo,21,8,"div",16,Ee),a(35,"div",17)(36,"a",18),d("click",function(){return i.addMember()}),a(37,"mat-icon"),c(38,"add"),r(),c(39," Add a person "),r()()(),b(40,"mat-divider"),a(41,"mat-expansion-panel",19)(42,"mat-expansion-panel-header")(43,"mat-panel-title"),c(44," Add New Member "),r(),a(45,"mat-panel-description"),c(46," Create a new user without password "),r()(),a(47,"form",20)(48,"div",4)(49,"mat-form-field",5)(50,"mat-label"),c(51,"Name"),r(),b(52,"input",21),f(53,Go,2,0,"mat-error"),r()(),a(54,"div",4)(55,"mat-form-field",5)(56,"mat-label"),c(57,"Surname"),r(),b(58,"input",22),f(59,Po,2,0,"mat-error"),r()(),a(60,"div",4)(61,"mat-form-field",5)(62,"mat-label"),c(63,"Username"),r(),b(64,"input",23),f(65,Oo,2,0,"mat-error"),r()(),a(66,"div",4)(67,"mat-form-field",5)(68,"mat-label"),c(69,"Email"),r(),b(70,"input",24),f(71,No,2,0,"mat-error")(72,Ao,2,0,"mat-error"),r()(),a(73,"div",25)(74,"button",26),d("click",function(){return i.addNewUser()}),c(75," Add to Group "),r()()()()(),a(76,"mat-dialog-actions",27)(77,"button",28),c(78,"Cancel"),r(),a(79,"button",29),c(80," Create Group "),r()()()()),e&2){let o,l,p,v,C,Y,Q,W;m(3),s("formGroup",i.groupForm),m(7),h(!((o=i.groupForm.get("name"))==null||o.errors==null)&&o.errors.required?10:-1),m(),h(!((l=i.groupForm.get("name"))==null||l.errors==null)&&l.errors.minlength?11:-1),m(14),w(i.currencies),m(4),h(!((p=i.groupForm.get("currency"))==null||p.errors==null)&&p.errors.required?29:-1),m(4),w(i.members.controls),m(14),s("formGroup",i.newUserForm),m(6),h(!((v=i.newUserForm.get("name"))==null||v.errors==null)&&v.errors.required?53:-1),m(6),h(!((C=i.newUserForm.get("surname"))==null||C.errors==null)&&C.errors.required?59:-1),m(6),h(!((Y=i.newUserForm.get("username"))==null||Y.errors==null)&&Y.errors.required?65:-1),m(6),h(!((Q=i.newUserForm.get("email"))==null||Q.errors==null)&&Q.errors.required?71:-1),m(),h(!((W=i.newUserForm.get("email"))==null||W.errors==null)&&W.errors.email?72:-1),m(2),s("disabled",!i.newUserForm.valid),m(5),s("disabled",!i.groupForm.valid)}},dependencies:[G,Te,Ze,Be,Ae,Re,ze,Le,Ve,$e,qe,je,U,V,N,q,A,D,Oe,O,R,We,Qe,Ke,Xe,Ye,et,Je,ct,ot,nt,at,rt,it,tt,B,z,dt,lt,mt,st,_t,X,ht,ut],styles:[".dialog-container[_ngcontent-%COMP%]{padding:24px}.form-field[_ngcontent-%COMP%]{margin-bottom:16px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{min-width:400px}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0;margin-bottom:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.mt-3[_ngcontent-%COMP%]{margin-top:16px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.members-container[_ngcontent-%COMP%]{margin:24px 0}.member-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:16px;margin-bottom:16px}.member-inputs[_ngcontent-%COMP%]{display:flex;gap:16px;flex:1}.member-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.add-member-link[_ngcontent-%COMP%]{margin-top:8px}h3[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:500}"]})};function Ro(n,t){if(n&1){let e=I();a(0,"span")(1,"mat-checkbox",8),d("change",function(o){_(e);let l=x(2);return g(l.recalculate(o))}),c(2),r()()}if(n&2){let e=x(2);m(),s("checked",e.checkboxState),m(),M("Przelicz wszystkie wydatki do ",e.data.group.defaultCurrency,"")}}function zo(n,t){n&1&&(a(0,"th",16),c(1,"Od"),r())}function Bo(n,t){if(n&1&&(a(0,"td",17),c(1),r()),n&2){let e=t.$implicit;m(),T(e.from)}}function Vo(n,t){n&1&&(a(0,"th",16),c(1,"Do"),r())}function qo(n,t){if(n&1&&(a(0,"td",17),c(1),r()),n&2){let e=t.$implicit;m(),T(e.to)}}function jo(n,t){n&1&&(a(0,"th",16),c(1,"Kwota"),r())}function $o(n,t){if(n&1&&(a(0,"td",17),c(1),F(2,"number"),r()),n&2){let e=t.$implicit;m(),re(" ",_e(2,2,e.amount,"1.2-2")," ",e.currency," ")}}function Lo(n,t){n&1&&b(0,"tr",18)}function Ho(n,t){n&1&&b(0,"tr",19)}function Zo(n,t){if(n&1&&(a(0,"table",7),Se(1,9),f(2,zo,2,0,"th",10)(3,Bo,2,1,"td",11),we(),Se(4,12),f(5,Vo,2,0,"th",10)(6,qo,2,1,"td",11),we(),Se(7,13),f(8,jo,2,0,"th",10)(9,$o,3,5,"td",11),we(),f(10,Lo,1,0,"tr",14)(11,Ho,1,0,"tr",15),r()),n&2){let e=x(2);s("dataSource",e.settlements),m(10),s("matHeaderRowDef",e.displayedColumns),m(),s("matRowDefColumns",e.displayedColumns)}}function Ko(n,t){n&1&&(a(0,"p"),c(1,"Brak rozlicze\u0144 do wykonania."),r())}function Xo(n,t){if(n&1&&(a(0,"div",2),f(1,Ro,3,2,"span")(2,Zo,12,3,"table",7)(3,Ko,2,0,"p"),r()),n&2){let e=x();m(),h(e.hasMoreCurrencies()?1:-1),m(),h(e.settlements.length>0?2:3)}}function Yo(n,t){}function Qo(n,t){if(n&1&&f(0,Yo,0,0,"ng-template",3),n&2){x();let e=L(5);s("ngTemplateOutlet",e)}}function Wo(n,t){n&1&&(a(0,"div",20),b(1,"mat-spinner"),r())}var be=class n{constructor(t,e,i,o,l){this.data=t;this.dialogRef=e;this.http=i;this.snackBar=o;this.dialog=l}settlements=[];originalSettlements=[];recalculatedSettlements=[];displayedColumns=["from","to","amount"];loading=!0;settling=!1;checkboxState=!1;recalculated=!1;ngOnInit(){this.http.get(`${ae.apiUrl}/expenses/groups/${this.data.group.id}/settlement`).subscribe({next:t=>{this.originalSettlements=t,this.settlements=t,this.loading=!1},error:()=>{this.snackBar.open("B\u0142\u0105d \u0142adowania rozlicze\u0144","Zamknij",{duration:3e3}),this.loading=!1}})}onSettle(){this.dialog.open(Ot).afterClosed().subscribe(e=>{e&&(this.settling=!0,this.http.post(`${ae.apiUrl}/expenses/groups/${this.data.group.id}/settle`,{}).subscribe({next:()=>{this.snackBar.open("Rozliczono wszystkie wydatki!","Zamknij",{duration:3e3}),this.dialogRef.close(!0)},error:()=>{this.snackBar.open("B\u0142\u0105d podczas rozliczania","Zamknij",{duration:3e3}),this.settling=!1}}))})}onCancel(){this.dialogRef.close(!1)}hasMoreCurrencies(){return new Set(this.originalSettlements.map(e=>e.currency)).size>1}recalculate(t){if(this.checkboxState=t.checked,t.checked){if(this.loading=!0,this.recalculated){this.snackBar.open("Rozliczenia zosta\u0142y ju\u017C przeliczone","Zamknij",{duration:3e3}),this.settlements=this.recalculatedSettlements,this.loading=!1;return}this.http.get(`${ae.apiUrl}/expenses/groups/${this.data.group.id}/settlement`,{params:{recalculate:!0}}).subscribe({next:e=>{this.settlements=e,this.recalculatedSettlements=e,this.loading=!1,this.recalculated=!0},error:()=>{this.snackBar.open("B\u0142\u0105d podczas przeliczania rozlicze\u0144","Zamknij",{duration:3e3}),this.loading=!1,this.recalculated=!1}})}else this.settlements=this.originalSettlements}static \u0275fac=function(e){return new(e||n)(u(K),u(me),u(Ge),u(Z),u(le))};static \u0275cmp=y({type:n,selectors:[["app-settle-expenses-dialog"]],decls:11,vars:2,consts:[["loadingTpl",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngTemplateOutlet"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-table","",1,"mat-elevation-z1",2,"width","100%",3,"dataSource"],[3,"change","checked"],["matColumnDef","from"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","to"],["matColumnDef","amount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"d-flex","justify-content-center","p-4"]],template:function(e,i){if(e&1){let o=I();a(0,"h1",1),c(1,"Rozliczenie grupy"),r(),f(2,Xo,4,2,"div",2)(3,Qo,1,1,null,3)(4,Wo,2,0,"ng-template",null,0,Qt),a(6,"div",4)(7,"button",5),d("click",function(){return _(o),g(i.onCancel())}),c(8,"Anuluj"),r(),a(9,"button",6),d("click",function(){return _(o),g(i.onSettle())}),c(10," Rozlicz "),r()()}e&2&&(m(2),h(i.loading?3:2),m(7),s("disabled",i.settlements.length===0||i.settling))},dependencies:[U,N,q,A,Pi,Mi,Si,Ti,wi,Ei,Ui,Di,Ii,Fi,Gi,D,O,Ni,Oi,Ue,ti,X],styles:["table[_ngcontent-%COMP%]{margin-bottom:16px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px}"]})},Ot=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["ng-component"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close","false"],["mat-raised-button","","color","warn",3,"mat-dialog-close"]],template:function(e,i){e&1&&(a(0,"h2",0),c(1,"Potwierd\u017A rozliczenie"),r(),a(2,"mat-dialog-content")(3,"p"),c(4,"Czy na pewno chcesz rozliczy\u0107 wszystkie wydatki w tej grupie? Tej operacji nie mo\u017Cna cofn\u0105\u0107."),r()(),a(5,"mat-dialog-actions",1)(6,"button",2),c(7,"Anuluj"),r(),a(8,"button",3),c(9,"Rozlicz"),r()()),e&2&&(m(8),s("mat-dialog-close",!0))},dependencies:[U,V,N,q,A,D,O],encapsulation:2})};var en=(n,t)=>t.date,ji=(n,t)=>t.id;function tn(n,t){n&1&&(a(0,"mat-icon",10),c(1,"check_circle"),r())}function on(n,t){if(n&1&&(a(0,"div",19)(1,"span",12),c(2),r(),c(3),F(4,"number"),r()),n&2){let e=t.$implicit;fe("paid",e.isPaid),m(),ne("matTooltip",e.user.email),m(),T(e.user.name),m(),M(": ",_e(4,5,e.amountOwed,"1.2-2")," ")}}function nn(n,t){if(n&1){let e=I();a(0,"tr")(1,"td")(2,"span",9),F(3,"date"),c(4),F(5,"slice"),r(),f(6,tn,2,0,"mat-icon",10),r(),a(7,"td")(8,"div",11)(9,"mat-icon",12),c(10),r(),a(11,"span",13),c(12),r()()(),a(13,"td"),c(14),F(15,"number"),r(),a(16,"td")(17,"span",12),c(18),r()(),a(19,"td")(20,"div",14),S(21,on,5,8,"div",15,ji),r()(),a(23,"td",16)(24,"button",17),d("click",function(){let o=_(e).$implicit,l=x(2);return g(l.editExpense(o))}),a(25,"mat-icon"),c(26,"edit"),r()(),a(27,"button",18),d("click",function(){let o=_(e).$implicit,l=x(2);return g(l.deleteExpense(o))}),a(28,"mat-icon"),c(29,"delete"),r()()()()}if(n&2){let e=t.$implicit;m(2),s("matTooltip",Tt(3,10,e.date,"medium","","pl")),m(2),M(" ",Yt(5,15,e.description,0,30)," "),m(2),h(e.isPaid?6:-1),m(3),s("matTooltip",((e.category==null?null:e.category.mainCategory)||"Bez Kategorii")+" - "+((e.category==null?null:e.category.subCategory)||"Og\xF3lne")),m(),M(" ",(e.category==null?null:e.category.icon)||"category"," "),m(2),T((e.category==null?null:e.category.subCategory)||"Og\xF3lne"),m(2),re("",_e(15,19,e.amount,"1.2-2")," ",e.currency,""),m(3),ne("matTooltip",e.payer.email),m(),T(e.payer.name),m(3),w(e.splits)}}function rn(n,t){if(n&1&&(a(0,"div",6)(1,"div",7),c(2),F(3,"date"),r(),a(4,"div",8)(5,"table")(6,"thead")(7,"tr")(8,"th"),c(9,"Opis"),r(),a(10,"th"),c(11,"Kategoria"),r(),a(12,"th"),c(13,"Kwota"),r(),a(14,"th"),c(15,"P\u0142aci\u0142"),r(),a(16,"th"),c(17,"Kto"),r(),a(18,"th"),c(19,"Akcje"),r()()(),a(20,"tbody"),S(21,nn,30,22,"tr",null,ji),r()()()()),n&2){let e=t.$implicit;m(2),M(" ",Tt(3,1,e.date,"shortDate","","pl")," "),m(19),w(e.expenses)}}var vt=class n{constructor(t,e,i,o){this.data=t;this.expenseService=e;this.snackBar=i;this.dialog=o}expenses=[];groupedExpenses=[];ngOnInit(){this.loadExpenses()}loadExpenses(){this.expenseService.getExpensesByGroup(this.data.group.id).subscribe({next:t=>{this.expenses=t.map(e=>{let i=typeof e.category=="string"?vi(e.category):e.category||Ci;return ee(J({},e),{category:i})}),this.groupedExpenses=this.groupExpensesByDay(this.expenses)},error:t=>{console.error(t),this.snackBar.open("Error loading expenses","Close",{duration:3e3})}})}deleteExpense(t){this.dialog.open(yi,{width:"400px"}).afterClosed().subscribe(i=>{i&&this.expenseService.deleteExpense(t.id).subscribe({next:()=>{this.expenses=this.expenses.filter(o=>o.id!==t.id),this.groupedExpenses=this.groupExpensesByDay(this.expenses),this.snackBar.open("Expense deleted successfully","Close",{duration:3e3})},error:o=>{console.error(o),this.snackBar.open("Error deleting expense","Close",{duration:3e3})}})})}editExpense(t){this.dialog.open(bt,{width:"70%",data:{group:this.data.group,expense:t,isEdit:!0}}).afterClosed().subscribe(i=>{i&&this.expenseService.updateExpense(t.id,i).subscribe({next:()=>{this.snackBar.open("Expense updated successfully","Close",{duration:3e3}),this.loadExpenses()},error:o=>{console.error(o),this.snackBar.open("Error updating expense","Close",{duration:3e3})}})})}groupExpensesByDay(t){let e=new Map;return t.forEach(i=>{let o=new Date(i.date),l=new Date(o.getFullYear(),o.getMonth(),o.getDate()).toISOString();e.has(l)||e.set(l,[]),e.get(l)?.push(i)}),Array.from(e.entries()).map(([i,o])=>({date:new Date(i),expenses:o.sort((l,p)=>new Date(p.date).getTime()-new Date(l.date).getTime())})).sort((i,o)=>o.date.getTime()-i.date.getTime())}settleExpenses(t){this.dialog.open(be,{width:"600px",data:{group:t}}).afterClosed().subscribe(i=>{i&&this.snackBar.open("Wydatki zosta\u0142y rozliczone!","Zamknij",{duration:3e3})})}static \u0275fac=function(e){return new(e||n)(u(K),u(Ne),u(Z),u(le))};static \u0275cmp=y({type:n,selectors:[["app-view-expenses-dialog"]],decls:15,vars:1,consts:[[1,"dialog-container"],[1,"dialog-header"],["mat-dialog-title",""],[1,"row",3,"click"],["mat-icon-button","","color","primary","matTooltip","Rozlicz wydatki"],["mat-icon-button","","mat-dialog-close","",1,"close-button"],[1,"date-group"],[1,"date-header"],[1,"table-wrapper"],["matTooltipPosition","above",3,"matTooltip"],["matTooltip","Uregulowane",1,"paid-icon"],[1,"category-cell"],[3,"matTooltip"],[1,"category-name"],[1,"splits-container"],[1,"split-item",3,"paid"],[1,"actions"],["mat-icon-button","","color","primary","matTooltip","Edytuj wydatek",3,"click"],["mat-icon-button","","color","warn","matTooltip","Skasuj wydatek",3,"click"],[1,"split-item"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"h2",2),c(3),r(),a(4,"div",3),d("click",function(){return i.settleExpenses(i.data.group)}),c(5," Rozlicz wydatki "),a(6,"button",4)(7,"mat-icon"),c(8,"payments"),r()()(),a(9,"button",5)(10,"mat-icon"),c(11,"close"),r()()(),a(12,"mat-dialog-content"),S(13,rn,23,6,"div",6,en),r()()),e&2&&(m(3),M("Wydatki dla ",i.data.group.name,""),m(10),w(i.groupedExpenses))},dependencies:[G,oi,Ue,ii,U,V,N,A,D,R,B,z,de,se,ce],styles:["[_nghost-%COMP%]{display:block}.dialog-container[_ngcontent-%COMP%]{padding:24px;max-height:80vh;box-sizing:border-box}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:24px;background:#fff;position:sticky;top:0;z-index:3}h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}mat-dialog-content[_ngcontent-%COMP%]{max-height:calc(80vh - 120px)!important;overflow:auto}.table-wrapper[_ngcontent-%COMP%]{position:relative;margin:0;padding:0}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:24px}thead[_ngcontent-%COMP%]{position:sticky;top:48px;z-index:2}th[_ngcontent-%COMP%]{background:#fff;padding:12px;text-align:left;font-weight:500;color:#000000de;border-bottom:1px solid rgba(0,0,0,.12);white-space:nowrap}td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid rgba(0,0,0,.12);color:#000000de}.date-group[_ngcontent-%COMP%]{margin-bottom:32px}.date-header[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px 16px;font-size:16px;font-weight:500;border-radius:4px 4px 0 0;position:sticky;top:0;z-index:2}.splits-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.split-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.9em;color:#000000b3}.split-item.paid[_ngcontent-%COMP%]{color:#4caf50}.paid-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.category-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.category-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80px;font-size:.9em}tr[_ngcontent-%COMP%]:hover{background:#0000000a}.actions[_ngcontent-%COMP%]{white-space:nowrap;text-align:right}"]})};var At=class{_document;_textarea;constructor(t,e){this._document=e;let i=this._textarea=this._document.createElement("textarea"),o=i.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",i.setAttribute("aria-hidden","true"),i.value=t,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){let t=this._textarea,e=!1;try{if(t){let i=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){let t=this._textarea;t&&(t.remove(),this._textarea=void 0)}},$i=(()=>{class n{_document=P(ei);constructor(){}copy(e){let i=this.beginCopy(e),o=i.copy();return i.destroy(),o}beginCopy(e){return new At(e,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Li=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Me({type:n});static \u0275inj=Ce({})}return n})();var Ct=class n{constructor(t,e){this.clipboard=t;this.snackBar=e}copyUrl(){let t=window.location.href;this.clipboard.copy(t),this.snackBar.open("Skopiowano URL do schowka!","Zamknij",{duration:3e3})}static \u0275fac=function(e){return new(e||n)(u($i),u(Z))};static \u0275cmp=y({type:n,selectors:[["copy-url-button"]],decls:3,vars:0,consts:[["matTooltip","Skopiuj link do tej grupy","mat-icon-button","","aria-label","Kopiuj link",3,"click"],[1,"copy-icon"]],template:function(e,i){e&1&&(a(0,"button",0),d("click",function(){return i.copyUrl()}),a(1,"mat-icon",1),c(2,"content_copy"),r()())},dependencies:[G,Li,B,z,D,R,ce,de,se],styles:["button[_ngcontent-%COMP%]{color:#3f51b5}.copy-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}"]})};var cn=(n,t)=>t.id;function mn(n,t){if(n&1&&(a(0,"span",8),c(1),r()),n&2){let e=t.$implicit,i=t.$index,o=t.$count;ne("matTooltip",e.email),m(),re("",e.name,"",i===o-1?"":", ","")}}function ln(n,t){if(n&1){let e=I();a(0,"div",4)(1,"mat-card",6)(2,"mat-card-header")(3,"mat-card-title"),b(4,"copy-url-button"),a(5,"a",7),c(6),a(7,"span",8)(8,"mat-icon"),c(9),r()()()()(),a(10,"mat-card-content")(11,"p",9),c(12,"Cz\u0142onkowie:"),r(),S(13,mn,2,3,"span",8,oe),r(),a(15,"mat-card-actions",10)(16,"button",11),d("click",function(){let o=_(e).$implicit,l=x();return g(l.addExpense(o))}),a(17,"mat-icon"),c(18,"add_shopping_cart"),r()(),a(19,"button",12),d("click",function(){let o=_(e).$implicit,l=x();return g(l.editGroup(o))}),a(20,"mat-icon"),c(21,"edit"),r()(),a(22,"button",13),d("click",function(){let o=_(e).$implicit,l=x();return g(l.deleteGroup(o))}),a(23,"mat-icon"),c(24,"delete"),r()(),a(25,"button",14),d("click",function(){let o=_(e).$implicit,l=x();return g(l.viewExpenses(o))}),a(26,"mat-icon"),c(27,"receipt"),r()(),a(28,"button",15),d("click",function(){let o=_(e).$implicit,l=x();return g(l.settleExpenses(o))}),a(29,"mat-icon"),c(30,"payments"),r()()()()()}if(n&2){let e=t.$implicit,i=x();m(5),s("routerLink","/groups/"+e.id),m(),M(" ",e.name," "),m(),ne("matTooltip",e.isPublic?"Publiczna":"Prywatna"),m(2),T(e.isPublic?"public":"lock"),m(4),w(e.members),m(6),s("disabled",!i.canEditGroup(e))("matTooltip",i.canEditGroup(e)?"Edytuj grup\u0119":"Mo\u017Cesz edytkowa\u0107 tylko grupy, kt\xF3re stworzy\u0142e\u015B"),m(3),s("disabled",!i.canDeleteGroup(e))("matTooltip",i.canDeleteGroup(e)?"Skasuj grup\u0119":"Mo\u017Cesz skasowa\u0107 tylko grupy, kt\xF3re stworzy\u0142e\u015B")}}function sn(n,t){n&1&&(a(0,"div",5)(1,"mat-card")(2,"mat-card-content")(3,"p",16),c(4,"Nie masz zarejestrowanych grup, stw\xF3rz je"),r()()()())}var Hi=class n{constructor(t,e,i,o,l){this.groupService=t;this.dialog=e;this.authService=i;this.snackBar=o;this.expenseService=l}groups=[];currentUser=null;ngOnInit(){Rt({user:this.authService.getCurrentUser(),groups:this.groupService.getMyGroups()}).subscribe({next:({user:t,groups:e})=>{this.currentUser=t,this.groups=e},error:t=>{console.error(t),this.snackBar.open("Error loading data","Close",{duration:3e3})}})}openCreateGroupDialog(){this.createGroup()}getMembersList(t){return!t.members||t.members.length===0?"No members":t.members.map(e=>e.name).join(", ")}createGroup(){this.dialog.open(kt,{width:"70%"}).afterClosed().subscribe(e=>{e&&this.groupService.createGroup(e).subscribe({next:i=>{this.groups=[...this.groups,i],this.snackBar.open("Group created successfully","Close",{duration:3e3})},error:i=>{console.error(i),this.snackBar.open("Error creating group","Close",{duration:3e3})}})})}canEditGroup(t){return this.canDeleteGroup(t)}canDeleteGroup(t){return!this.currentUser||!t||!t.members||!t.members.some(i=>i.id===this.currentUser?.id)?!1:t.createdBy?.id===this.currentUser.id}editGroup(t){if(!this.canEditGroup(t)){this.snackBar.open("You can only edit groups you created","Close",{duration:3e3});return}this.dialog.open(gt,{width:"70%",data:{group:t,currentUser:this.currentUser}}).afterClosed().subscribe(i=>{i&&this.groupService.updateGroup(t.id,i).subscribe({next:o=>{let l=this.groups.findIndex(p=>p.id===o.id);l!==-1&&(this.groups[l]=o,this.groups=[...this.groups],console.log(this.groups)),this.snackBar.open("Group updated successfully","Close",{duration:3e3})},error:o=>{console.error(o),this.snackBar.open("Error updating group","Close",{duration:3e3})}})})}deleteGroup(t){if(!this.canDeleteGroup(t)){this.snackBar.open("You can only delete groups you created","Close",{duration:3e3});return}this.dialog.open(ft,{width:"400px",data:t}).afterClosed().subscribe(i=>{i&&this.groupService.deleteGroup(t.id).subscribe({next:()=>{this.groups=this.groups.filter(o=>o.id!==t.id),this.snackBar.open("Group deleted successfully","Close",{duration:3e3})},error:o=>{console.error(o),this.snackBar.open("Error deleting group","Close",{duration:3e3})}})})}viewExpenses(t){this.dialog.open(vt,{width:"80%",height:"80%",data:{group:t}})}settleExpenses(t){this.dialog.open(be,{width:"600px",data:{group:t}}).afterClosed().subscribe(i=>{i&&this.snackBar.open("Wydatki zosta\u0142y rozliczone!","Zamknij",{duration:3e3})})}addExpense(t){this.dialog.open(bt,{width:"70%",data:{group:t,currentUser:this.currentUser}}).afterClosed().subscribe(i=>{i&&this.expenseService.createExpense(i).subscribe({next:()=>{this.snackBar.open("Expense added successfully","Close",{duration:3e3})},error:o=>{console.error(o),this.snackBar.open("Error adding expense","Close",{duration:3e3})}})})}static \u0275fac=function(e){return new(e||n)(u(si),u(le),u(Pe),u(Z),u(Ne))};static \u0275cmp=y({type:n,selectors:[["app-groups"]],features:[De([Ft,Gt,...ki])],decls:11,vars:1,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12","mb-4"],["mat-raised-button","","color","primary",3,"click"],[1,"col-md-6","mb-4"],[1,"col-12"],[1,"group-card"],[1,"hand",3,"routerLink"],[3,"matTooltip"],[1,"mb-0"],["align","end"],["mat-icon-button","","color","primary","matTooltip","Dodaj wydatek",3,"click"],["mat-icon-button","","color","primary",3,"click","disabled","matTooltip"],["mat-icon-button","","color","warn",3,"click","disabled","matTooltip"],["mat-icon-button","","color","accent","matTooltip","Zobacz wydatki",3,"click"],["mat-icon-button","","color","primary","matTooltip","Rozlicz wydatki",3,"click"],[1,"text-center"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),d("click",function(){return i.openCreateGroupDialog()}),a(4,"mat-icon"),c(5,"add"),r(),c(6," Stw\xF3rz now\u0105 grup\u0119 "),r()()(),a(7,"div",1),S(8,ln,31,8,"div",4,cn,!1,sn,5,0,"div",5),r()()),e&2&&(m(8),w(i.groups))},dependencies:[G,gi,ui,fi,bi,_i,hi,B,z,D,O,R,U,de,se,ce,ri,ni,Ft,Gt,Ct],styles:[".container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:-15px}.col-md-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%;padding:15px;display:flex}.mb-4[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;margin-bottom:0}mat-card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}mat-card-content[_ngcontent-%COMP%]{flex:1;padding:16px}mat-card-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center}mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;margin-left:8px;vertical-align:middle}mat-card-actions[_ngcontent-%COMP%]{padding:16px;margin-top:auto;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.hand[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:flex;align-items:center}@media (max-width: 768px){.col-md-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}mat-card-actions[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]{padding:10px}}@media (max-width: 480px){mat-card-actions[_ngcontent-%COMP%]{padding:8px;gap:4px}mat-card-content[_ngcontent-%COMP%]{padding:8px}}"]})};export{Hi as GroupsComponent};
